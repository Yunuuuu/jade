{
    "version": "2022.07.2-576",
    "description": "An IDE for R with console, syntax-highlighting, editor that supports direct code execution, as well as tools for plotting, history, debugging and workspace management.",
    "homepage": "https://www.rstudio.com/products/rstudio/",
    "license": "AGPL-3.0-only",
    "notes": "For 32bit, please install 'versions/rstudio11",
    "depends": "jade/r",
    "architecture": {
        "64bit": {
            "url": "https://download1.rstudio.org/desktop/windows/RStudio-2022.07.2-576.zip",
            "hash": "063ead1f62f773c3228c9213dbe75879a8c4d0d2f5cf49f170b8ab5ded060308",
            "post_install": [
                "& \"$bucketsdir\\jade\\scripts\\keep_extra_persist.ps1\" \"${env:APPDATA}\\RStudio\" -name \"Roaming\\RStudio\"",
                "& \"$bucketsdir\\jade\\scripts\\keep_extra_persist.ps1\" \"${env:LOCALAPPDATA}\\RStudio\" -name \"Local\\RStudio\""
            ]
        }
    },
    "bin": [
        [
            "bin\\rstudio.exe",
            "rstudio"
        ]
    ],
    "shortcuts": [
        [
            "bin\\rstudio.exe",
            "RStudio"
        ]
    ],
    "uninstaller": {
        "script": [
            "function remove_link($dir) {",
            "    write-host \"Unlinking $dir\"",
            "    $source = (Get-Item -Path $dir -Force)",
            "    if ($source.LinkType) {",
            "        $source_path = $source.FullName",
            "        # directory (junction)",
            "        if ($source -is [System.IO.DirectoryInfo]) {",
            "            # remove read-only attribute on the link",
            "            attrib -R /L $source_path",
            "            # remove the junction",
            "            Remove-Item -Path $source_path -Recurse -Force -ErrorAction SilentlyContinue",
            "        } else {",
            "            # remove the hard link",
            "            Remove-Item -Path $source_path -Force -ErrorAction SilentlyContinue",
            "        }",
            "    }",
            "}",
            "remove_link \"${env:APPDATA}\\RStudio\"",
            "remove_link \"${env:LOCALAPPDATA}\\RStudio\""
        ]
    },
    "checkver": {
        "url": "https://www.rstudio.com/products/rstudio/download/",
        "regex": "/windows/RStudio-([\\d.-]+)\\."
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://download1.rstudio.org/desktop/windows/RStudio-$version.zip",
                "hash": {
                    "url": "https://www.rstudio.com/products/rstudio/download/",
                    "regex": "(?s)$basename.*?$sha256"
                }
            }
        }
    }
}
