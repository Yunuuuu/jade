{
    "version": "3.7.0",
    "description": "Instant messaging app by Tencent",
    "homepage": "https://pc.weixin.qq.com/",
    "license": {
        "identifier": "EULA",
        "url": "https://weixin.qq.com/cgi-bin/readtemplate?lang=zh_CN&t=weixin_agreement&s=default"
    },
    "url": "https://dldir1.qq.com/weixin/Windows/WeChatSetup.exe#/dl.7z",
    "hash": "a3f1354b25de8df8439bea44540fd41baca3a58c25dc1eafee7b41c972fffdbe",
    "installer": {
        "script": [
            "Remove-Item \"$dir\\`$PLUGINSDIR\" -Force -Recurse",
            "Remove-Item \"$dir\\`$_15_\" -Force -Recurse",
            "Remove-Item \"$dir\\`$R5\" -Force -Recurse"
        ]
    },
    "post_install": [
        "& \"$bucketsdir\\jade\\scripts\\keep_extra_persist.ps1\" \"${env:APPDATA}\\Tencent\\WeChat\" -name \"Roaming\\Tencent\\WeChat\"",
        "& \"$bucketsdir\\jade\\scripts\\keep_extra_persist.ps1\" \"${env:APPDATA}\\Tencent\\WeChatApp\" -name \"Roaming\\Tencent\\WeChatApp\"",
        "& \"$bucketsdir\\jade\\scripts\\keep_extra_persist.ps1\" \"${env:USERPROFILE}\\Documents\\WeChat Files\" -name \"Documents\\WeChat Files\""
    ],
    "shortcuts": [
        [
            "wechat.exe",
            "WeChat"
        ]
    ],
    "uninstaller": {
        "script": [
            "function is_link($dir) {",
            "    $linktype = (Get-Item -Path $dir -Force).LinkType",
            "    ($linktype -eq \"Junction\") -or ($linktype -eq \"HardLink\")",
            "}",
            "if (is_link \"${env:APPDATA}\\Tencent\\WeChat\") {",
            "    Remove-Item \"${env:APPDATA}\\Tencent\\WeChat\" -Force -Recurse",
            "}",
            "if (is_link \"${env:APPDATA}\\Tencent\\WeChatApp\") {",
            "    Remove-Item \"${env:APPDATA}\\Tencent\\WeChatApp\" -Force -Recurse",
            "}",
            "if (is_link \"${env:USERPROFILE}\\Documents\\WeChat Files\") {",
            "    Remove-Item \"${env:USERPROFILE}\\Documents\\WeChat Files\" -Force -Recurse",
            "}",
            "if (Test-Path \"$bucketsdir\\jade\\scripts\\wechat\\wechat-uninstall-context.reg\") {",
            "    reg import \"$bucketsdir\\jade\\scripts\\wechat\\wechat-uninstall-context.reg\"",
            "}",
            "if (-not (Test-Path -Path \"${env:APPDATA}\\Tencent\\*\")) {",
            "    Remove-Item \"${env:APPDATA}\\Tencent\" -Force -Recurse",
            "}"
        ]
    },
    "checkver": {
        "url": "https://pc.weixin.qq.com/",
        "regex": "(\\d+\\.\\d+\\.\\d+)"
    },
    "autoupdate": {
        "url": "https://dldir1.qq.com/weixin/Windows/WeChatSetup.exe#/dl.7z",
        "hash": {
            "mode": "download"
        }
    }
}
